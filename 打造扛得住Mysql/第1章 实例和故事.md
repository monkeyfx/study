## 数据库架构
1 * Master -> Slave * 15

1 Slave->Master

网卡故障

QPS & TPS。CPU：64核 内存512GB

35w & 5w

并发量：同一时间处理的请求的数量

700:

CPU 使用率    

1. 服务器性能急剧下降
2. 最好不用在主库上数据库备份
3. 大型活动前取消这类计划

## 影响数据库性能

大表：

>记录行数巨大，单表超过千万行
>表数据文件巨大，表数据文件超过10G

1. 大表对查询的影响

慢查询：很难在一定的时间内过滤出所需要的数据

>来源少
区分度低
大量磁盘IO
降低磁盘效率
大量慢查询

2. 大表对DDL操作的影响

>建立索引需要很长的时间

<font color="red">风险：</font>
MySQL版本<5.5 建立索引会锁表

MySQL版本>=5.5 虽然不会锁表但会主从延迟


修改表结构需要长时间锁表

#####风险：
>会造成长时间主从延迟

影响正常的数据操作（字段修改会造成阻塞 数据库连接数猛增 、锁表）

分库分表把一张大表分成多个小表

#####难点：

>分表主键的选择
>分表后跨分区数据的查询和统计


大表历史数据归档 减少对前后端业务的影响

























